Bluepill.application("resque-scheduler", :log_file => "/var/log/bluepill.log") do |app|
  app.working_dir = "/data/<%= @app_name %>/current"
  app.uid = 'root'
  app.gid = 'root'
  app.process("resque_scheduler") do |process|
    process.stdout = process.stderr = "/data/<%= @app_name %>/shared/log/resque_scheduler.log"
    process.pid_file = "/data/run/resque_scheduler.pid"
    process.environment = { 'RAILS_ENV' => '<%= @rails_env %>' }
    process.start_command = "bundle exec rake resque:scheduler"
    process.stop_command = "kill -QUIT {{PID}}"
    process.daemonize = true
    #process.checks :mem_usage, :every => 30.seconds, :above => 600.megabytes, :times => [3,5]
    #process.start_grace_time =     60.seconds
    #process.stop_grace_time =      15.seconds
    #process.restart_grace_time =  120.seconds
    #process.monitor_children do |c|
    # production alerts go here
    <%# if ['production'].include?(@rails_env) %>
    #alert cdx-alert@manheim.com only on { timeout, nonexist }
    <%# end %>
  end
end

